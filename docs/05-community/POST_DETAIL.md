# 게시글 상세 화면

## 1. 개요

게시글 상세 화면은 커뮤니티 게시글의 전체 내용을 표시하고, 좋아요와 댓글 기능을 제공하는 화면입니다.

- **원본 PDF 참조**: 55-57페이지

---

## 2. 화면 구성

### 2.1 전체 레이아웃

```
┌─────────────────────────────────────┐
│  ←   카테고리명             ⋮       │  ← 헤더 (뒤로가기 + 더보기)
├─────────────────────────────────────┤
│                                     │
│  ┌───────────────────────────────┐  │
│  │                               │  │
│  │       [이미지 영역]            │  │  ← 첨부 이미지
│  │                               │  │
│  └───────────────────────────────┘  │
│                                     │
│  게시글 본문 내용이 여기에 표시됩니다 │  ← 본문 내용
│  ...                                │
│                                     │
├─────────────────────────────────────┤
│  ❤ NNN개 좋아요                     │  ← 좋아요 영역
├─────────────────────────────────────┤
│  댓글 (NNN개)                       │  ← 댓글 섹션 헤더
│ ┌───────────────────────────────┐   │
│ │ [프로필] 닉네임                │   │
│ │ 댓글 내용...                  │   │  ← 댓글 리스트
│ │ 시간  답글달기                │   │
│ └───────────────────────────────┘   │
├─────────────────────────────────────┤
│  [    댓글을 입력하세요...    ] 📎  │  ← 댓글 입력창
└─────────────────────────────────────┘
```

### 2.2 상단 네비게이션

| 요소 | 설명 |
|------|------|
| 뒤로가기 버튼 | ← 아이콘, 이전 화면(커뮤니티 메인)으로 이동 |
| 카테고리명 | 현재 게시글의 카테고리 표시 |
| 더보기 메뉴 | ⋮ 아이콘, 신고/공유/수정/삭제 메뉴 |

### 2.3 게시글 헤더

| 요소 | 설명 |
|------|------|
| 카테고리 | 게시글이 속한 카테고리 표시 |
| 제목 | 게시글 제목 |
| 작성자 정보 | 프로필 이미지, 닉네임 |
| 작성일시 | 게시글 작성 날짜/시간 |
| 조회수 | 게시글 조회 횟수 |

### 2.4 게시글 본문

| 요소 | 설명 |
|------|------|
| 이미지 | 첨부된 이미지 (최대 10장), 스와이프로 넘기기 |
| 본문 내용 | 텍스트 컨텐츠 |

### 2.5 좋아요 영역

| 요소 | 설명 |
|------|------|
| 좋아요 버튼 | ❤ 하트 아이콘 + "NNN개 좋아요" 형식 |
| 활성 상태 | 본인이 좋아요 한 경우 빨간색 하트로 표시 |

### 2.6 댓글 영역

| 요소 | 설명 |
|------|------|
| 댓글 헤더 | "댓글 (NNN개)" 형식으로 댓글 수 표시 |
| 댓글 리스트 | 댓글 목록 (COMMENT_SYSTEM.md 참조) |
| 댓글 입력창 | 하단 고정, "댓글을 입력하세요..." 플레이스홀더 |
| 첨부 아이콘 | 📎 이미지 첨부 기능 |

---

## 3. 기능 상세

### 3.1 게시글 조회

1. 화면 진입 시 게시글 상세 정보 로드
2. 조회수 자동 증가 (중복 방지 로직 적용)
3. 이미지 터치 시 전체화면 이미지 뷰어

### 3.2 좋아요 기능

1. 좋아요 버튼 탭 시 좋아요 토글
2. 이미 좋아요 상태면 좋아요 취소
3. 좋아요 수 실시간 반영
4. 로그인 필요 (비로그인 시 로그인 유도)

### 3.3 더보기 메뉴

#### 본인 게시글인 경우
| 메뉴 | 동작 |
|------|------|
| 수정 | 게시글 수정 화면으로 이동 |
| 삭제 | 삭제 확인 팝업 → 삭제 처리 |
| 공유 | 게시글 링크 공유 |

#### 타인 게시글인 경우
| 메뉴 | 동작 |
|------|------|
| 신고 | 신고 사유 선택 → 신고 처리 |
| 공유 | 게시글 링크 공유 |
| 작성자 차단 | 해당 사용자 게시글 숨김 |

### 3.4 게시글 작성/수정

#### 작성 화면 레이아웃

```
┌─────────────────────────────────────┐
│  ←        게시글 등록               │  ← 헤더
├─────────────────────────────────────┤
│                                     │
│  카테고리     카테고리를 선택하세요 ▼ │  ← 카테고리 드롭다운
│                                     │
├─────────────────────────────────────┤
│  ┌───────────────────────────────┐  │
│  │  📷+                          │  │
│  │  미디어 업로드 (최대 10개)     │  │  ← 이미지 업로드 영역
│  └───────────────────────────────┘  │
│                                     │
│  [이미지1] [이미지2] [이미지3] ...  │  ← 업로드된 이미지 미리보기
│                                     │
├─────────────────────────────────────┤
│                                     │
│  내용을 입력해주세요.               │  ← 본문 입력 영역
│                                     │
│                                     │
│                                     │
├─────────────────────────────────────┤
│                                     │
│        [ 등록하기 ]                 │  ← 등록 버튼 (네이비)
│                                     │
└─────────────────────────────────────┘
```

#### 작성 화면 구성
| 요소 | 설명 |
|------|------|
| 헤더 | "게시글 등록" 타이틀, 뒤로가기 버튼 |
| 카테고리 선택 | 드롭다운으로 카테고리 선택 |
| 미디어 업로드 | 📷+ 아이콘, "미디어 업로드 (최대 10개)" 안내 |
| 이미지 미리보기 | 업로드된 이미지 썸네일 목록 |
| 본문 입력 | "내용을 입력해주세요." 플레이스홀더 |
| 등록하기 버튼 | 네이비 배경 버튼, 게시글 등록 실행 |

#### 등록 확인 팝업

```
┌─────────────────────────────────────┐
│                                     │
│      게시글을 등록하시겠습니까?      │
│                                     │
│   [ 취소 ]        [ 확인 ]          │
│                                     │
└─────────────────────────────────────┘
```

#### 등록 플로우
1. 필수 항목 입력 확인 (카테고리, 본문)
2. 등록하기 버튼 탭
3. "게시글을 등록하시겠습니까?" 확인 팝업 표시
4. 확인 시 게시글 등록 API 호출
5. 성공 시 상세 화면으로 이동

### 3.5 게시글 삭제

1. 더보기 → 삭제 선택
2. 삭제 확인 팝업 표시
3. 확인 시 삭제 API 호출
4. 성공 시 커뮤니티 메인으로 이동

---

## 4. 데이터 요구사항

### 4.1 게시글 상세

| 필드명 | 타입 | 필수 | 설명 |
|--------|------|------|------|
| postId | String | Y | 게시글 고유 ID |
| categoryId | String | Y | 카테고리 ID |
| categoryName | String | Y | 카테고리 이름 |
| title | String | Y | 게시글 제목 |
| content | String | Y | 게시글 본문 (HTML) |
| images | List<String> | N | 첨부 이미지 URL 목록 |
| authorId | String | Y | 작성자 ID |
| authorNickname | String | Y | 작성자 닉네임 |
| authorProfileUrl | String | N | 작성자 프로필 이미지 |
| createdAt | DateTime | Y | 작성 일시 |
| updatedAt | DateTime | N | 수정 일시 |
| viewCount | int | Y | 조회수 |
| likeCount | int | Y | 좋아요 수 |
| commentCount | int | Y | 댓글 수 |
| isLiked | boolean | Y | 현재 사용자 좋아요 여부 |
| isAuthor | boolean | Y | 현재 사용자가 작성자인지 여부 |

### 4.2 게시글 작성/수정 요청

| 필드명 | 타입 | 필수 | 설명 |
|--------|------|------|------|
| categoryId | String | Y | 카테고리 ID |
| title | String | Y | 게시글 제목 |
| content | String | Y | 게시글 본문 (최대 3,000자) |
| images | List<File> | N | 첨부 이미지 파일 (최대 10장) |

### 4.3 신고 요청

| 필드명 | 타입 | 필수 | 설명 |
|--------|------|------|------|
| postId | String | Y | 신고 대상 게시글 ID |
| reasonCode | String | Y | 신고 사유 코드 |
| reasonDetail | String | N | 상세 신고 사유 |

---

## 5. API 요구사항

### 5.1 게시글 상세 조회

```
GET /api/community/posts/{postId}
```

**Response**:
```json
{
  "success": true,
  "data": {
    "postId": "post_001",
    "categoryId": "cat_001",
    "categoryName": "자유게시판",
    "title": "게시글 제목",
    "content": "<p>HTML 컨텐츠</p>",
    "images": [
      "https://cdn.example.com/image1.jpg",
      "https://cdn.example.com/image2.jpg"
    ],
    "authorId": "user_001",
    "authorNickname": "닉네임",
    "authorProfileUrl": "https://cdn.example.com/profile.jpg",
    "createdAt": "2025-12-22T10:00:00Z",
    "updatedAt": null,
    "viewCount": 150,
    "likeCount": 30,
    "commentCount": 15,
    "isLiked": false,
    "isAuthor": false
  }
}
```

### 5.2 게시글 등록

```
POST /api/community/posts
Content-Type: multipart/form-data
```

**Request Body**:
| 필드 | 타입 | 설명 |
|------|------|------|
| categoryId | String | 카테고리 ID |
| title | String | 제목 |
| content | String | 본문 내용 |
| images | File[] | 첨부 이미지 (선택) |

**Response**:
```json
{
  "success": true,
  "data": {
    "postId": "post_002"
  }
}
```

### 5.3 게시글 수정

```
PUT /api/community/posts/{postId}
Content-Type: multipart/form-data
```

### 5.4 게시글 삭제

```
DELETE /api/community/posts/{postId}
```

### 5.5 좋아요 토글

```
POST /api/community/posts/{postId}/like
```

**Response**:
```json
{
  "success": true,
  "data": {
    "isLiked": true,
    "likeCount": 31
  }
}
```

### 5.6 게시글 신고

```
POST /api/community/posts/{postId}/report
```

**Request Body**:
```json
{
  "reasonCode": "SPAM",
  "reasonDetail": "광고성 게시글입니다"
}
```

### 5.7 작성자 차단

```
POST /api/users/{userId}/block
```

---

## 6. 관리자 기능

### 6.1 게시글 상세 관리

| 기능 | 설명 |
|------|------|
| 게시글 조회 | 상세 내용 확인 |
| 게시글 수정 | 제목, 본문, 카테고리 수정 |
| 게시글 삭제 | 게시글 영구 삭제 |
| 게시글 숨김/노출 | 게시글 공개 상태 변경 |

### 6.2 신고 관리

| 기능 | 설명 |
|------|------|
| 신고 목록 조회 | 신고된 게시글 리스트 |
| 신고 처리 | 경고, 삭제, 무시 처리 |
| 신고 사유 관리 | 신고 사유 코드 CRUD |

### 6.3 Admin API

```
# 게시글 관리
GET    /api/admin/community/posts/{postId}
PUT    /api/admin/community/posts/{postId}
DELETE /api/admin/community/posts/{postId}
PUT    /api/admin/community/posts/{postId}/visibility

# 신고 관리
GET    /api/admin/community/reports
GET    /api/admin/community/reports/{reportId}
PUT    /api/admin/community/reports/{reportId}/process
```

---

## 7. 비즈니스 규칙

### 7.1 입력 제한

| 항목 | 제한 |
|------|------|
| 제목 | 최대 100자 [확인 필요] |
| 본문 | 최대 3,000자 |
| 이미지 | 최대 10장 |
| 이미지 크기 | 파일당 최대 10MB [확인 필요] |

### 7.2 조회수 중복 방지

- 동일 사용자의 반복 조회 시 조회수 미증가
- 기준: 일정 시간(예: 1시간) 내 재조회 시 미반영 [확인 필요]

### 7.3 삭제 정책

- 게시글 삭제 시 댓글도 함께 삭제
- 삭제된 게시글은 DB에서 soft delete 처리 권장

---

## 8. UI/UX 고려사항

- 이미지 로딩 시 프로그레스 인디케이터 표시
- 긴 본문의 경우 스크롤 가능
- 댓글 영역은 게시글 본문 아래 자연스럽게 연결
- 하단 댓글 입력창은 키보드 표시 시 자동 조정
- 네트워크 오류 시 재시도 옵션 제공
