# 유료 픽 (Paid Picks)

## 1. 개요

유료 픽은 **Admin에서만 등록 가능**한 프리미엄 분석 픽으로, 사용자가 포인트를 사용하여 구매한 후 상세 내용을 확인할 수 있습니다. 경기 종료 후에는 자동으로 무료픽으로 전환됩니다.

**✅ 확정 정책 (2026-01-06)**:
- **Admin에서만 등록 가능** (일반 유저 등록 불가)
- 유료 픽마다 **열람 가격을 개별적으로 설정** 가능
- 전문가 정보(닉네임, 주요 종목)는 **Admin 전문가 관리 메뉴**에서 등록된 정보가 노출
- 전문가 프로필 이미지 등록 기능 추가 필요 (Admin_v0.2 ppt 49p 참고)
- 유저는 설정된 열람 가격을 결제(포인트 차감) 후 해당 픽 열람

- **원본 PDF 참조**: 46, 50페이지

---

## 2. 화면 구성

### 2.1 유료픽 상세 화면

#### 상단 영역
| 요소 | 설명 |
|------|------|
| 뒤로가기 버튼 | 이전 화면으로 이동 |
| 공유 버튼 | 픽 공유 기능 |
| 더보기 버튼 | 신고, 차단 등 추가 옵션 |

#### 전문가 정보 영역
| 요소 | 설명 |
|------|------|
| 프로필 이미지 | 전문가 프로필 사진 |
| 닉네임 | 전문가 닉네임 |
| 등급 뱃지 | 전문가 등급 (예: 골드, 실버) |
| 적중률 | 전문가의 전체 적중률 |
| 팔로우 버튼 | 전문가 팔로우/언팔로우 |

#### 경기 정보 영역
| 요소 | 설명 |
|------|------|
| 리그 정보 | 리그명, 리그 로고 |
| 경기 시간 | 경기 예정 시간 또는 진행 상태 |
| 홈팀 정보 | 팀명, 엠블럼, 최근 전적 |
| 원정팀 정보 | 팀명, 엠블럼, 최근 전적 |
| 스코어 | 경기 진행/종료 시 스코어 표시 |

#### 픽 정보 영역 (구매 전)
| 요소 | 설명 |
|------|------|
| 베팅 타입 | 승무패 / 핸디캡 / 언더오버 |
| 필요 포인트 | 구매에 필요한 포인트 |
| 구매하기 버튼 | 포인트 결제 후 상세 확인 |
| 블러 처리 | 분석 내용은 블러 처리되어 미리보기 불가 |

#### 픽 정보 영역 (구매 후)
| 요소 | 설명 |
|------|------|
| 베팅 타입 | 승무패 / 핸디캡 / 언더오버 |
| 예측 | 전문가의 예측 (예: "홈팀 승", "언더 2.5") |
| 픽 제목 | 분석 픽 제목 |
| 집중 분석 | 전문가의 상세 분석 내용 |
| 비교 정보 | 양 팀의 비교 데이터 (선택적) |

#### 하단 인터랙션 영역
| 요소 | 설명 |
|------|------|
| 좋아요 버튼 | 픽 좋아요 토글 |
| 좋아요 수 | 현재 좋아요 수 |
| 조회수 | 픽 조회 수 |
| 댓글 버튼 | 댓글 영역으로 이동 |
| 댓글 수 | 현재 댓글 수 |

#### 댓글 영역
| 요소 | 설명 |
|------|------|
| 댓글 목록 | 사용자 댓글 리스트 |
| 댓글 입력 | 댓글 작성 입력 필드 |

---

## 3. 기능 상세

### 3.1 유료픽 구매 플로우

```
1. 유료픽 카드 클릭
2. 픽 상세 화면 진입 (내용 블러 처리)
3. "구매하기" 버튼 클릭
4. 포인트 결제 확인 팝업
   - 보유 포인트 표시
   - 필요 포인트 표시
   - 결제 후 잔여 포인트 표시
5. "구매하기" 확인
6. 포인트 차감 및 상세 내용 공개
7. MY픽 > 구매한 픽에 자동 추가
```

### 3.2 포인트 부족 시
```
1. "구매하기" 버튼 클릭
2. 포인트 부족 팝업 표시
   - 현재 보유 포인트
   - 필요 포인트
   - 부족 포인트
3. "포인트 충전하기" 버튼 → 포인트 충전 화면 이동
4. "취소" 버튼 → 팝업 닫기
```

### 3.3 경기 종료 후 처리
- 경기 종료 시 유료픽은 자동으로 무료픽으로 전환
- 적중/미적중 라벨 표시
- 전문가 적중률 통계에 반영

### 3.4 전문가 팔로우
- 팔로우한 전문가의 새 픽 등록 시 푸시 알림 수신 가능
- 팔로우 목록에서 관리 가능

### 3.5 공유 기능
- 카카오톡, 링크 복사 등 공유 옵션
- 공유 시 앱 설치 유도 딥링크 생성

### 3.6 신고/차단
- 부적절한 픽 신고
- 특정 전문가 차단 (해당 전문가 픽 미노출)

---

## 4. 데이터 요구사항

### 4.1 유료픽 상세 데이터
```typescript
interface PaidPickDetail {
  id: string;
  expert: {
    id: string;
    nickname: string;
    profileImage: string;
    grade: string;
    hitRate: number;  // 적중률 (%)
    followerCount: number;
    isFollowing: boolean;
  };
  match: {
    id: string;
    league: {
      id: string;
      name: string;
      logo: string;
    };
    homeTeam: {
      id: string;
      name: string;
      logo: string;
      recentForm: string[];  // 최근 5경기 결과 ['W', 'L', 'D', 'W', 'W']
    };
    awayTeam: {
      id: string;
      name: string;
      logo: string;
      recentForm: string[];
    };
    matchTime: string;
    status: 'scheduled' | 'live' | 'finished';
    score?: {
      home: number;
      away: number;
    };
  };
  pick: {
    bettingType: 'match_result' | 'handicap' | 'under_over';
    prediction: string;
    title: string;
    analysis: string;  // 집중 분석 (마크다운 지원)
    comparison?: {     // 비교 정보 (선택적)
      items: Array<{
        label: string;
        homeValue: string;
        awayValue: string;
      }>;
    };
  };
  points: number;
  isPurchased: boolean;
  result?: 'hit' | 'miss' | null;
  stats: {
    viewCount: number;
    likeCount: number;
    commentCount: number;
    isLiked: boolean;
  };
  createdAt: string;
}
```

### 4.2 구매 요청 데이터
```typescript
interface PurchaseRequest {
  pickId: string;
  userId: string;
}

interface PurchaseResponse {
  success: boolean;
  remainingPoints: number;
  pickDetail: PaidPickDetail;  // 구매 후 상세 내용 포함
}
```

---

## 5. API 요구사항

### 5.1 유료픽 상세 조회
```
GET /api/picks/:pickId
```

**Response (미구매 시):**
```json
{
  "success": true,
  "data": {
    "id": "pick_123",
    "expert": { ... },
    "match": { ... },
    "pick": {
      "bettingType": "match_result",
      "prediction": null,  // 미구매 시 null
      "title": null,
      "analysis": null
    },
    "points": 500,
    "isPurchased": false,
    "stats": { ... }
  }
}
```

### 5.2 유료픽 구매
```
POST /api/picks/:pickId/purchase
```

**Request:**
```json
{
  "userId": "user_123"
}
```

**Response:**
```json
{
  "success": true,
  "data": {
    "remainingPoints": 1500,
    "pickDetail": {
      "pick": {
        "bettingType": "match_result",
        "prediction": "홈팀 승",
        "title": "맨유 vs 리버풀 빅매치 분석",
        "analysis": "## 경기 분석\n\n홈팀의 최근 홈경기 5연승..."
      },
      "isPurchased": true
    }
  }
}
```

### 5.3 전문가 팔로우
```
POST /api/experts/:expertId/follow
DELETE /api/experts/:expertId/follow
```

### 5.4 픽 좋아요
```
POST /api/picks/:pickId/like
DELETE /api/picks/:pickId/like
```

### 5.5 픽 신고
```
POST /api/picks/:pickId/report
```

**Request:**
```json
{
  "reason": "inappropriate_content",
  "description": "부적절한 내용이 포함되어 있습니다."
}
```

---

## 6. 관리자 기능

### 6.1 유료픽 등록 (Admin 전용)

**✅ 확정 정책**: 유료픽은 Admin에서만 등록 가능합니다.

| 기능 | 설명 |
|------|------|
| 유료픽 등록 | 경기 선택, 예측 정보, 분석 내용 등록 |
| 열람 가격 설정 | **픽별 개별 가격 설정 가능** |
| 전문가 연결 | Admin 전문가 관리에서 등록된 전문가 선택 |

### 6.2 유료픽 관리
| 기능 | 설명 |
|------|------|
| 유료픽 목록 조회 | 전체 유료픽 목록 (필터: 상태, 종목, 기간) |
| 유료픽 상세 조회 | 픽 내용 전체 확인 |
| 유료픽 수정 | 픽 내용, 가격 수정 |
| 유료픽 삭제 | 부적절한 픽 삭제 |
| 유료픽 숨김 | 특정 픽 숨김 처리 |
| 환불 처리 | 삭제된 픽 구매자 포인트 환불 |

### 6.3 전문가 관리
| 기능 | 설명 |
|------|------|
| 전문가 등록 | 닉네임, 주요 종목, 프로필 이미지 등록 |
| 전문가 정보 수정 | 전문가 정보 수정 |
| 전문가 삭제/비활성화 | 전문가 계정 관리 |

> **참고**: Admin_v0.2 ppt 49p 참고

### 6.3 신고 관리
| 기능 | 설명 |
|------|------|
| 신고 목록 조회 | 신고된 픽 목록 |
| 신고 처리 | 신고 검토 및 조치 (삭제, 경고, 기각) |
| 신고 통계 | 신고 유형별 통계 |

### 6.4 매출 통계
| 기능 | 설명 |
|------|------|
| 일별/월별 매출 | 유료픽 판매 현황 |
| 전문가별 매출 | 전문가별 판매 통계 |
| 인기 픽 분석 | 조회수/구매수 상위 픽 |

---

## 7. 팝업/모달

### 7.1 구매 확인 팝업
```
┌─────────────────────────────┐
│         유료픽 구매          │
├─────────────────────────────┤
│  보유 포인트: 2,000P        │
│  필요 포인트: 500P          │
│  ─────────────────          │
│  결제 후 잔여: 1,500P       │
├─────────────────────────────┤
│  [취소]      [구매하기]      │
└─────────────────────────────┘
```

### 7.2 포인트 부족 팝업
```
┌─────────────────────────────┐
│        포인트 부족           │
├─────────────────────────────┤
│  보유 포인트: 200P          │
│  필요 포인트: 500P          │
│  부족 포인트: 300P          │
├─────────────────────────────┤
│  [취소]   [포인트 충전하기]   │
└─────────────────────────────┘
```

### 7.3 구매 완료 토스트
```
"픽 구매가 완료되었습니다. (500P 차감)"
```

---

## 8. 화면 상태

### 8.1 로딩 상태
- 스켈레톤 UI로 상세 화면 레이아웃 표시

### 8.2 구매 전 상태
- 분석 내용 블러 처리
- "구매하기" 버튼 활성화

### 8.3 구매 후 상태
- 전체 내용 표시
- 구매 버튼 대신 구매 완료 표시

### 8.4 경기 종료 상태
- 적중/미적중 라벨 표시
- 스코어 표시
- 무료픽으로 전환됨 안내
