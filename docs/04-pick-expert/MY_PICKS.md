# MY 픽 (My Picks)

## 1. 개요

MY픽 화면은 사용자가 구매하거나 알림 설정한 픽을 관리하는 화면입니다. 구매한 유료픽과 알림 설정한 픽을 탭으로 구분하여 확인할 수 있습니다.

- **원본 PDF 참조**: 52페이지

---

## 2. 화면 구성

### 2.1 전체 레이아웃

```
┌─────────────────────────────────────┐
│  ←      (유료)나의일명                │  ← 헤더
├─────────────────────────────────────┤
│   [구매한 픽]      작성한 픽         │  ← 탭
├─────────────────────────────────────┤
│  전문가별 ▼        예스트웨일 ▼      │  ← 필터
├─────────────────────────────────────┤
│ ┌───────────────────────────────┐   │
│ │ [프로필]  전문가명        🔔  │   │
│ │   최근 N경기중 N경기 NNN적중   │   │
│ │   ...                         │   │  ← 픽 카드 리스트
│ └───────────────────────────────┘   │
│                                     │
├─────────────────────────────────────┤
│  홈  픽전문가  커뮤니티  랭킹  MY   │  ← 하단 탭바
└─────────────────────────────────────┘
```

### 2.2 상단 영역
| 요소 | 설명 |
|------|------|
| 뒤로가기 버튼 | 이전 화면으로 이동 |
| 헤더 타이틀 | "(유료)나의일명" 또는 "MY 픽" |

### 2.3 탭 영역
| 탭 | 설명 |
|-----|------|
| 구매한 픽 | 포인트로 구매한 유료픽 목록 |
| 작성한 픽 | 내가 작성한 픽 목록 (전문가인 경우) |

### 2.3 필터 영역
| 요소 | 설명 |
|------|------|
| 경기 상태 필터 | 전체 / 예정 / 진행중 / 종료 |

### 2.4 픽 리스트 영역

각 픽 카드에 표시되는 정보:

| 요소 | 설명 |
|------|------|
| 전문가 프로필 | 프로필 이미지, 닉네임, 등급 |
| 픽 제목 | 분석 픽 제목 |
| 경기 정보 | 팀명, 리그, 경기 시간 |
| 베팅 타입 | 승무패 / 핸디캡 / 언더오버 |
| 예측 | 전문가의 예측 값 |
| 경기 상태 | 예정 / 진행중 / 종료 |
| 적중 라벨 | 경기 종료 시 적중/미적중 표시 |
| 스코어 | 진행/종료 시 현재 스코어 |

---

## 3. 기능 상세

### 3.1 구매한 픽 탭

#### 목록 표시
- 사용자가 포인트로 구매한 유료픽 목록
- 구매 최신순으로 정렬 (기본값)
- 무한 스크롤 페이지네이션

#### 경기 상태별 필터
| 필터 | 설명 |
|------|------|
| 전체 | 모든 구매한 픽 |
| 예정 | 경기 시작 전 픽 |
| 진행중 | 현재 진행 중인 경기 픽 |
| 종료 | 경기 종료된 픽 |

#### 픽 카드 인터랙션
- 카드 클릭 시 픽 상세 화면으로 이동
- 이미 구매했으므로 전체 내용 바로 확인 가능

### 3.2 알림한 픽 탭

#### 알림 설정 기능
- 관심 있는 픽에 알림 설정 가능
- 알림 설정 시 해당 경기 시작 전 푸시 알림 발송
- 무료 기능 (포인트 불필요)

#### 목록 표시
- 알림 설정한 픽 목록
- 알림 설정 최신순 정렬

#### 알림 해제
- 각 픽 카드에서 알림 해제 가능
- 스와이프 또는 알림 아이콘 토글

### 3.3 실시간 업데이트
- 경기 진행 시 스코어 실시간 업데이트
- 경기 종료 시 적중 여부 자동 반영

### 3.4 빈 상태 처리
- 구매한 픽이 없을 경우: "구매한 픽이 없습니다. 전문가의 픽을 구매해보세요!"
- 알림한 픽이 없을 경우: "알림 설정한 픽이 없습니다."

---

## 4. 데이터 요구사항

### 4.1 MY픽 목록 데이터
```typescript
interface MyPick {
  id: string;
  type: 'purchased' | 'notified';
  pick: {
    id: string;
    expert: {
      id: string;
      nickname: string;
      profileImage: string;
      grade: string;
    };
    title: string;
    match: {
      id: string;
      homeTeam: {
        name: string;
        logo: string;
      };
      awayTeam: {
        name: string;
        logo: string;
      };
      league: string;
      matchTime: string;
      status: 'scheduled' | 'live' | 'finished';
      score?: {
        home: number;
        away: number;
      };
    };
    bettingType: 'match_result' | 'handicap' | 'under_over';
    prediction: string;
    result?: 'hit' | 'miss' | null;
  };
  purchasedAt?: string;  // 구매한 픽인 경우
  notifiedAt?: string;   // 알림 설정한 픽인 경우
  pointsSpent?: number;  // 구매에 사용한 포인트
}
```

### 4.2 필터 옵션
```typescript
type MatchStatusFilter = 'all' | 'scheduled' | 'live' | 'finished';
```

---

## 5. API 요구사항

### 5.1 구매한 픽 목록 조회
```
GET /api/users/me/picks/purchased
```

**Query Parameters:**
| 파라미터 | 타입 | 필수 | 설명 |
|----------|------|------|------|
| status | string | X | 경기 상태 필터 (all/scheduled/live/finished) |
| page | number | X | 페이지 번호 |
| limit | number | X | 페이지당 개수 |

**Response:**
```json
{
  "success": true,
  "data": {
    "picks": [
      {
        "id": "my_pick_1",
        "type": "purchased",
        "pick": {
          "id": "pick_123",
          "expert": {
            "id": "expert_1",
            "nickname": "축구박사",
            "profileImage": "url",
            "grade": "gold"
          },
          "title": "맨유 vs 리버풀 분석",
          "match": {
            "homeTeam": { "name": "맨유", "logo": "url" },
            "awayTeam": { "name": "리버풀", "logo": "url" },
            "league": "프리미어리그",
            "matchTime": "2025-12-22T20:00:00Z",
            "status": "scheduled"
          },
          "bettingType": "match_result",
          "prediction": "홈팀 승",
          "result": null
        },
        "purchasedAt": "2025-12-22T10:00:00Z",
        "pointsSpent": 500
      }
    ],
    "pagination": {
      "currentPage": 1,
      "totalPages": 5,
      "totalCount": 50
    }
  }
}
```

### 5.2 알림한 픽 목록 조회
```
GET /api/users/me/picks/notified
```

**Query Parameters:**
| 파라미터 | 타입 | 필수 | 설명 |
|----------|------|------|------|
| status | string | X | 경기 상태 필터 |
| page | number | X | 페이지 번호 |
| limit | number | X | 페이지당 개수 |

### 5.3 픽 알림 설정
```
POST /api/picks/:pickId/notify
```

**Response:**
```json
{
  "success": true,
  "message": "알림이 설정되었습니다."
}
```

### 5.4 픽 알림 해제
```
DELETE /api/picks/:pickId/notify
```

**Response:**
```json
{
  "success": true,
  "message": "알림이 해제되었습니다."
}
```

### 5.5 구매/알림 통계 조회
```
GET /api/users/me/picks/stats
```

**Response:**
```json
{
  "success": true,
  "data": {
    "purchased": {
      "total": 50,
      "hit": 35,
      "miss": 10,
      "pending": 5,
      "hitRate": 77.8
    },
    "notified": {
      "total": 20,
      "active": 5
    }
  }
}
```

---

## 6. 관리자 기능

### 6.1 구매 내역 관리
| 기능 | 설명 |
|------|------|
| 구매 내역 조회 | 전체 사용자 구매 내역 |
| 구매 취소/환불 | 특정 구매 건 환불 처리 |
| 구매 통계 | 일별/월별 구매 현황 |

### 6.2 알림 관리
| 기능 | 설명 |
|------|------|
| 알림 발송 현황 | 픽 알림 발송 통계 |
| 알림 설정 현황 | 사용자별 알림 설정 현황 |

### 6.3 사용자 통계
| 기능 | 설명 |
|------|------|
| 사용자별 구매 현황 | 특정 사용자 구매 내역 |
| 사용자별 적중률 | 구매한 픽 적중 통계 |
| VIP 사용자 분석 | 고액 구매 사용자 분석 |

---

## 7. 푸시 알림

### 7.1 경기 시작 알림
알림 설정한 픽의 경기 시작 전 푸시 발송

```
┌─────────────────────────────┐
│ 🔔 경기 시작 알림            │
├─────────────────────────────┤
│ 알림 설정한 경기가 곧 시작됩니다 │
│                             │
│ 맨유 vs 리버풀              │
│ 프리미어리그 | 오후 8:00    │
├─────────────────────────────┤
│ [확인하러 가기]              │
└─────────────────────────────┘
```

### 7.2 경기 종료 알림 (선택적)
구매한 픽의 경기 종료 시 적중 여부 알림

```
┌─────────────────────────────┐
│ ✅ 적중! 축하합니다!         │
├─────────────────────────────┤
│ 축구박사님의 픽이 적중했습니다 │
│                             │
│ 맨유 2:1 리버풀             │
│ 예측: 홈팀 승 ✓             │
├─────────────────────────────┤
│ [결과 확인하기]              │
└─────────────────────────────┘
```

---

## 8. 화면 상태

### 8.1 로딩 상태
- 스켈레톤 UI로 픽 카드 형태 표시

### 8.2 빈 상태 - 구매한 픽
```
┌─────────────────────────────┐
│                             │
│     🛒                      │
│                             │
│   구매한 픽이 없습니다       │
│                             │
│   전문가의 픽을 구매해보세요! │
│                             │
│   [픽전문가 보러가기]        │
│                             │
└─────────────────────────────┘
```

### 8.3 빈 상태 - 알림한 픽
```
┌─────────────────────────────┐
│                             │
│     🔔                      │
│                             │
│   알림 설정한 픽이 없습니다   │
│                             │
│   관심있는 픽에 알림을 설정하면 │
│   경기 시작 전 알려드려요     │
│                             │
│   [픽 둘러보기]              │
│                             │
└─────────────────────────────┘
```

### 8.4 에러 상태
- 네트워크 오류 시 재시도 버튼과 에러 메시지 표시

---

## 9. 접근 경로

MY픽 화면에 접근할 수 있는 경로:

| 경로 | 설명 |
|------|------|
| 픽전문가 메인 > MY픽 플로팅 버튼 | 메인 화면 하단 플로팅 버튼 |
| 마이페이지 > MY픽 메뉴 | 마이페이지 메뉴에서 접근 |
| 푸시 알림 클릭 | 경기 시작/종료 알림 클릭 시 |
