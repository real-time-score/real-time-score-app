# 알림 목록 및 공지사항

## 1. 개요

사용자에게 전달된 알림 목록과 공지사항을 확인할 수 있는 화면입니다.

**원본 PDF 참조**: 74-75페이지

---

## 2. 알림 목록 화면

### 2.1 화면 구성

```
┌─────────────────────────────────────┐
│ [←]         알림                    │
├─────────────────────────────────────┤
│  [전체] [경기] [픽] [커뮤니티] [기타]│
├─────────────────────────────────────┤
│                                     │
│  오늘                               │
│  ┌─────────────────────────────┐    │
│  │ 🔔 새 픽 등록               │    │
│  │ 픽마스터님이 새로운 픽을    │    │
│  │ 등록했습니다                 │    │
│  │                    10분 전   │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ ⚽ 경기 시작 알림            │    │
│  │ 맨유 vs 리버풀 경기가       │    │
│  │ 곧 시작됩니다               │    │
│  │                    1시간 전  │    │
│  └─────────────────────────────┘    │
│                                     │
│  어제                               │
│  ┌─────────────────────────────┐    │
│  │ 💬 새 댓글                   │    │
│  │ 회원님의 게시글에 새 댓글이 │    │
│  │ 달렸습니다                   │    │
│  │                       어제   │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ 🎉 픽 적중!                  │    │
│  │ 등록하신 픽이 적중했습니다! │    │
│  │ +50 포인트 적립              │    │
│  │                       어제   │    │
│  └─────────────────────────────┘    │
│                                     │
│  이번 주                            │
│  ...                                │
│                                     │
└─────────────────────────────────────┘
```

### 2.2 알림 카테고리 필터

| 필터 | 포함 알림 유형 |
|------|---------------|
| 전체 | 모든 알림 |
| 경기 | 경기 시작/종료, 관심 경기 알림 |
| 픽 | 새 픽 등록, 픽 결과, 구매 알림 |
| 커뮤니티 | 댓글, 좋아요, 답글 알림 |
| 기타 | 포인트, 이벤트, 시스템 알림 |

### 2.3 알림 항목 구성

| 요소 | 설명 |
|------|------|
| 아이콘 | 알림 유형별 아이콘 |
| 제목 | 알림 제목 (1줄) |
| 내용 | 알림 상세 내용 (최대 2줄) |
| 시간 | 상대 시간 표시 (10분 전, 어제 등) |
| 읽음 여부 | 미읽음 알림은 배경색 구분 |

### 2.4 시간 그룹핑

- **오늘**: 오늘 받은 알림
- **어제**: 어제 받은 알림
- **이번 주**: 최근 7일 내 알림
- **이전**: 7일 이전 알림

---

## 3. 알림 유형별 상세

### 3.1 경기 알림

| 알림 유형 | 아이콘 | 제목 예시 | 내용 예시 |
|----------|--------|----------|----------|
| 경기 시작 | ⚽ | 경기 시작 알림 | {팀A} vs {팀B} 경기가 곧 시작됩니다 |
| 경기 종료 | ⚽ | 경기 종료 | {팀A} {스코어} {팀B} 경기가 종료되었습니다 |
| 관심 경기 | ⭐ | 관심 경기 알림 | {팀A} vs {팀B} 경기가 30분 후 시작됩니다 |

### 3.2 픽 알림

| 알림 유형 | 아이콘 | 제목 예시 | 내용 예시 |
|----------|--------|----------|----------|
| 새 픽 등록 | 🔔 | 새 픽 등록 | {전문가명}님이 새로운 픽을 등록했습니다 |
| 픽 적중 | 🎉 | 픽 적중! | 등록하신 픽이 적중했습니다! +{포인트} 적립 |
| 픽 미적중 | 😢 | 픽 미적중 | 아쉽게도 이번 픽은 미적중입니다 |
| 픽 구매 완료 | 💳 | 구매 완료 | {전문가명}님의 픽을 구매했습니다 |

### 3.3 커뮤니티 알림

| 알림 유형 | 아이콘 | 제목 예시 | 내용 예시 |
|----------|--------|----------|----------|
| 새 댓글 | 💬 | 새 댓글 | 회원님의 게시글에 새 댓글이 달렸습니다 |
| 답글 | 💬 | 새 답글 | 회원님의 댓글에 답글이 달렸습니다 |
| 좋아요 | ❤️ | 좋아요 | 회원님의 게시글에 좋아요가 눌렸습니다 |
| 팔로우 | 👤 | 새 팔로워 | {닉네임}님이 회원님을 팔로우합니다 |

### 3.4 기타 알림

| 알림 유형 | 아이콘 | 제목 예시 | 내용 예시 |
|----------|--------|----------|----------|
| 포인트 적립 | 🪙 | 포인트 적립 | {금액} 포인트가 적립되었습니다 |
| 포인트 사용 | 🪙 | 포인트 사용 | {금액} 포인트가 사용되었습니다 |
| 공지사항 | 📢 | 새 공지사항 | {공지 제목}이 등록되었습니다 |
| 이벤트 | 🎁 | 이벤트 알림 | {이벤트명} 이벤트가 시작되었습니다 |

---

## 4. 공지사항 리스트 (페이지 74)

### 4.1 화면 구성

```
┌─────────────────────────────────────┐
│ [←]       공지사항                  │
├─────────────────────────────────────┤
│                                     │
│  ┌─────────────────────────────┐    │
│  │ 🔴 [중요] 서비스 점검 안내   │    │
│  │ 12월 25일 새벽 2시~4시      │    │
│  │ 서비스 점검이 진행됩니다     │    │
│  │                  2025.01.20  │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ [공지] 앱 업데이트 안내      │    │
│  │ v2.0.0 업데이트 내용을      │    │
│  │ 확인해보세요                 │    │
│  │                  2025.01.18  │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ [이벤트] 신규 가입 이벤트    │    │
│  │ 지금 가입하면 1000P 즉시    │    │
│  │ 지급!                        │    │
│  │                  2025.01.15  │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ [공지] 이용약관 개정 안내    │    │
│  │ 2025년 2월 1일부터 적용되는 │    │
│  │ 이용약관 개정 내용입니다     │    │
│  │                  2025.01.10  │    │
│  └─────────────────────────────┘    │
│                                     │
│  ────────────── 더 보기 ──────────  │
│                                     │
└─────────────────────────────────────┘
```

### 4.2 공지 유형

| 유형 | 태그 | 표시 방식 |
|------|------|----------|
| 중요 공지 | [중요] | 🔴 빨간색 강조, 상단 고정 |
| 일반 공지 | [공지] | 일반 표시 |
| 이벤트 | [이벤트] | 이벤트 아이콘 표시 |
| 점검 안내 | [점검] | 점검 아이콘 표시 |

### 4.3 공지 항목 구성

| 요소 | 설명 |
|------|------|
| 유형 태그 | [중요], [공지], [이벤트] 등 |
| 제목 | 공지 제목 (1줄) |
| 미리보기 | 공지 내용 미리보기 (최대 2줄) |
| 작성일 | YYYY.MM.DD 형식 |

---

## 5. 공지사항 상세 (페이지 75)

### 5.1 화면 구성

```
┌─────────────────────────────────────┐
│ [←]       공지사항                  │
├─────────────────────────────────────┤
│                                     │
│  [중요] 서비스 점검 안내            │
│                                     │
│  2025.01.20                         │
│                                     │
│  ────────────────────────────────   │
│                                     │
│  안녕하세요, 스포츠스코어픽입니다.  │
│                                     │
│  서비스 안정화를 위한 점검이        │
│  아래와 같이 진행될 예정입니다.     │
│                                     │
│  ■ 점검 일시                        │
│  2025년 1월 25일 (토)               │
│  새벽 02:00 ~ 04:00 (약 2시간)      │
│                                     │
│  ■ 점검 내용                        │
│  - 서버 안정화 작업                 │
│  - 보안 업데이트                    │
│                                     │
│  ■ 영향 범위                        │
│  - 앱 전체 서비스 이용 불가         │
│                                     │
│  점검 시간 동안 서비스 이용에       │
│  불편을 드려 죄송합니다.            │
│                                     │
│  감사합니다.                        │
│                                     │
│  ────────────────────────────────   │
│                                     │
│  [< 이전글]           [다음글 >]    │
│                                     │
└─────────────────────────────────────┘
```

### 5.2 상세 화면 구성

| 요소 | 설명 |
|------|------|
| 유형 태그 + 제목 | [태그] 제목 형식 |
| 작성일 | 공지 등록일 |
| 본문 | 공지 상세 내용 (HTML 지원) |
| 첨부 이미지 | 이미지 첨부 시 표시 |
| 이전글/다음글 | 공지 목록 내비게이션 |

---

## 6. 데이터 요구사항

### 6.1 알림 데이터

```typescript
interface Notification {
  id: string;
  userId: string;
  type: NotificationType;
  category: 'match' | 'pick' | 'community' | 'etc';
  title: string;
  content: string;
  data: Record<string, any>;    // 추가 데이터 (경기ID, 게시글ID 등)
  isRead: boolean;
  createdAt: string;
}

type NotificationType =
  | 'match_start'
  | 'match_end'
  | 'favorite_match'
  | 'new_pick'
  | 'pick_hit'
  | 'pick_miss'
  | 'pick_purchase'
  | 'new_comment'
  | 'new_reply'
  | 'new_like'
  | 'new_follower'
  | 'point_earn'
  | 'point_use'
  | 'new_notice'
  | 'event';
```

### 6.2 공지사항 데이터

```typescript
interface Notice {
  id: string;
  type: 'important' | 'notice' | 'event' | 'maintenance';
  title: string;
  content: string;              // HTML 또는 Markdown
  preview: string;              // 미리보기 텍스트 (plain text)
  isPinned: boolean;            // 상단 고정 여부
  attachments: Attachment[];
  viewCount: number;
  createdAt: string;
  updatedAt: string;
  publishedAt: string;          // 공개 시작 시간
  expiredAt?: string;           // 공개 종료 시간 (선택)
}

interface Attachment {
  id: string;
  type: 'image' | 'file';
  url: string;
  name: string;
  size: number;
}
```

---

## 7. API 요구사항

### 7.1 알림 목록 조회

```
GET /api/v1/notifications?category={category}&page={page}&limit={limit}
```

**Response**
```json
{
  "notifications": [
    {
      "id": "notif_123",
      "type": "new_pick",
      "category": "pick",
      "title": "새 픽 등록",
      "content": "픽마스터님이 새로운 픽을 등록했습니다",
      "data": {
        "pickId": "pick_456",
        "expertId": "user_789"
      },
      "isRead": false,
      "createdAt": "2025-01-20T10:30:00Z"
    }
  ],
  "unreadCount": 5,
  "pagination": {
    "page": 1,
    "limit": 20,
    "totalCount": 45
  }
}
```

### 7.2 알림 읽음 처리

```
PUT /api/v1/notifications/{notificationId}/read
PUT /api/v1/notifications/read-all
```

### 7.3 미읽음 알림 개수

```
GET /api/v1/notifications/unread-count
```

**Response**
```json
{
  "total": 5,
  "byCategory": {
    "match": 2,
    "pick": 1,
    "community": 2,
    "etc": 0
  }
}
```

### 7.4 공지사항 목록 조회

```
GET /api/v1/notices?page={page}&limit={limit}
```

**Response**
```json
{
  "notices": [
    {
      "id": "notice_123",
      "type": "important",
      "title": "[중요] 서비스 점검 안내",
      "preview": "12월 25일 새벽 2시~4시 서비스 점검이...",
      "isPinned": true,
      "createdAt": "2025-01-20T00:00:00Z"
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 20,
    "totalCount": 15
  }
}
```

### 7.5 공지사항 상세 조회

```
GET /api/v1/notices/{noticeId}
```

**Response**
```json
{
  "id": "notice_123",
  "type": "important",
  "title": "[중요] 서비스 점검 안내",
  "content": "<p>안녕하세요, 스포츠스코어픽입니다...</p>",
  "attachments": [],
  "viewCount": 1234,
  "createdAt": "2025-01-20T00:00:00Z",
  "prevNotice": { "id": "notice_122", "title": "..." },
  "nextNotice": { "id": "notice_124", "title": "..." }
}
```

---

## 8. 관리자 기능

### 8.1 알림 관리

| 기능 | 설명 |
|------|------|
| 푸시 발송 | 전체/특정 사용자에게 푸시 발송 |
| 알림 템플릿 관리 | 알림 메시지 템플릿 CRUD |
| 발송 이력 조회 | 푸시 알림 발송 이력 조회 |
| 통계 대시보드 | 알림 발송/읽음률 통계 |

### 8.2 공지사항 관리

| 기능 | 설명 |
|------|------|
| 공지 CRUD | 공지사항 생성/조회/수정/삭제 |
| 상단 고정 | 중요 공지 상단 고정 설정 |
| 예약 발행 | 특정 시간에 자동 공개 |
| 만료 설정 | 특정 시간 이후 비공개 처리 |

### 8.3 필요 API (Admin)

```
# 알림 관리
POST   /api/admin/notifications/push
GET    /api/admin/notifications/templates
POST   /api/admin/notifications/templates
PUT    /api/admin/notifications/templates/{templateId}
DELETE /api/admin/notifications/templates/{templateId}
GET    /api/admin/notifications/history
GET    /api/admin/notifications/statistics

# 공지사항 관리
GET    /api/admin/notices
POST   /api/admin/notices
GET    /api/admin/notices/{noticeId}
PUT    /api/admin/notices/{noticeId}
DELETE /api/admin/notices/{noticeId}
PUT    /api/admin/notices/{noticeId}/pin
PUT    /api/admin/notices/{noticeId}/publish
```

---

## 9. 비즈니스 로직

### 9.1 알림 읽음 처리

```
1. 알림 항목 탭 시 해당 알림 읽음 처리
2. 연관 화면으로 이동 (경기 상세, 게시글 상세 등)
3. 상단 미읽음 배지 카운트 갱신
```

### 9.2 공지 조회수 카운트

```
1. 공지 상세 진입 시 조회수 +1
2. 동일 사용자 중복 조회 방지 (24시간 기준)
3. 비로그인 사용자도 조회수 카운트
```

### 9.3 알림 자동 삭제 정책

- 읽은 알림: 30일 후 자동 삭제
- 읽지 않은 알림: 90일 후 자동 삭제
- 사용자 수동 삭제 가능

---

## 10. 화면 전환

| 액션 | 이동 화면 |
|------|----------|
| 알림 항목 탭 (경기) | 경기 상세 화면 |
| 알림 항목 탭 (픽) | 픽 상세 화면 |
| 알림 항목 탭 (댓글) | 게시글 상세 화면 |
| 알림 항목 탭 (공지) | 공지사항 상세 화면 |
| 공지 항목 탭 | 공지사항 상세 화면 |
| 이전글/다음글 버튼 | 해당 공지 상세 화면 |
