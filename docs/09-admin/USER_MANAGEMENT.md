# 유저 관리 (User Management)

## 1. 개요

이 문서는 스포츠스코어픽 Admin에서 유저(회원, 픽전문가)를 관리하는 기능을 정의합니다.

- **원본 PDF 참조**: 48페이지 (픽전문가 조건), 58-66페이지 (유저 프로필, 랭킹)
- **적용 범위**: Admin > 유저 관리 메뉴

---

## 2. 회원 관리

### 2.1 회원 목록 화면

#### 화면 구성

```
┌─────────────────────────────────────────────────────────────┐
│ 회원 관리                                                    │
├─────────────────────────────────────────────────────────────┤
│ [검색어 입력_______] [상태 ▼] [가입일 ▼] [검색]              │
├─────────────────────────────────────────────────────────────┤
│ □ │ ID │ 닉네임 │ 이메일 │ 상태 │ 가입일 │ 활동온도 │ 관리 │
├───┼────┼────────┼────────┼──────┼────────┼──────────┼──────┤
│ □ │ 1  │ user1  │ a@b.c  │ 정상 │ 12-01  │ 38.5°    │ [상세]│
│ □ │ 2  │ user2  │ d@e.f  │ 정지 │ 12-02  │ 32.0°    │ [상세]│
│ ...                                                         │
├─────────────────────────────────────────────────────────────┤
│ [선택 정지] [선택 탈퇴]              < 1 2 3 4 5 ... 10 >   │
└─────────────────────────────────────────────────────────────┘
```

#### 검색/필터 옵션

| 필터 | 옵션 |
|------|------|
| 검색 대상 | 닉네임, 이메일, 회원 ID |
| 상태 | 전체, 정상, 정지, 탈퇴 |
| 가입일 | 기간 선택 (시작일 ~ 종료일) |
| 정렬 | 가입일, 활동온도, 최근접속 |

### 2.2 회원 상세 화면

#### 기본 정보

| 필드 | 설명 | 수정 가능 |
|------|------|:---------:|
| 회원 ID | 시스템 고유 ID | ❌ |
| 닉네임 | 사용자 닉네임 | ✅ |
| 이메일 | 로그인 이메일 | ❌ |
| 프로필 이미지 | 프로필 사진 | ✅ |
| 상태 | 정상/정지/탈퇴 | ✅ |
| 가입일 | 가입 일시 | ❌ |
| 최근 접속 | 마지막 접속 일시 | ❌ |
| 소셜 로그인 | 카카오/네이버/애플 | ❌ |

#### 활동 정보

| 항목 | 설명 |
|------|------|
| 활동온도 | 현재 온도 (기본 36.5°) |
| 작성 게시글 수 | 커뮤니티 게시글 수 |
| 작성 댓글 수 | 댓글 수 |
| 받은 좋아요 수 | 게시글/댓글 좋아요 |
| 팔로워 수 | 나를 팔로우하는 유저 |
| 팔로잉 수 | 내가 팔로우하는 유저 |
| 보유 포인트 | 현재 포인트 잔액 |

#### 활동 내역 탭

| 탭 | 내용 |
|---|------|
| 게시글 | 작성한 게시글 목록 |
| 댓글 | 작성한 댓글 목록 |
| 픽 구매 | 구매한 픽 목록 |
| 포인트 | 포인트 적립/사용 내역 |
| 신고 | 신고 당한/한 내역 |

### 2.3 회원 제재

#### 제재 유형

| 유형 | 설명 | 처리 |
|------|------|------|
| 정지 | 일시적 서비스 이용 제한 | 기간 설정 가능 |
| 영구정지 | 영구적 서비스 이용 제한 | 재가입 불가 |
| 탈퇴 | 관리자에 의한 강제 탈퇴 | 데이터 보관 정책 적용 |

#### 정지 처리 Modal

```
┌─────────────────────────────────────┐
│         회원 정지 처리               │
├─────────────────────────────────────┤
│ 대상 회원: user1 (a@b.c)            │
│                                     │
│ 정지 유형:                          │
│ ○ 기간 정지  ● 영구 정지            │
│                                     │
│ 정지 기간: [7일 ▼]                  │
│ (영구 정지 시 비활성화)              │
│                                     │
│ 정지 사유:                          │
│ ┌─────────────────────────────────┐│
│ │                                 ││
│ └─────────────────────────────────┘│
│                                     │
│     [취소]          [정지 처리]     │
└─────────────────────────────────────┘
```

---

## 3. 활동온도 시스템

### 3.1 온도 개념

PDF 참조: 유저 프로필 화면에서 활동온도 표시

| 항목 | 값 |
|------|-----|
| 기본 온도 | 36.5° |
| 최소 온도 | 0° |
| 최대 온도 | 99.9° |

### 3.2 온도 변동 기준

| 활동 | 온도 변화 | 비고 |
|------|:---------:|------|
| 게시글 작성 | +0.1° | 일일 한도 적용 |
| 댓글 작성 | +0.05° | 일일 한도 적용 |
| 좋아요 받음 | +0.02° | - |
| 신고 당함 | -1.0° | 신고 승인 시 |
| 게시글 삭제 (관리자) | -0.5° | - |
| 허위 픽 | -5.0° | [확인 필요] |

### 3.3 관리자 온도 조정

| 기능 | 설명 |
|------|------|
| 수동 조정 | 직접 온도 증감 |
| 조정 사유 | 필수 입력 |
| 조정 이력 | 로그 기록 |

---

## 4. 픽전문가 관리

### 4.1 픽전문가 조건

PDF 48페이지 참조:

| 조건 항목 | 기준값 | 관리자 조정 |
|----------|:------:|:-----------:|
| 최소 적중률 | 60% | ✅ |
| 최소 픽 수 | 50개 | ✅ |
| 최소 활동온도 | 40° | ✅ |
| 신고 이력 | 0건 | ❌ |

### 4.2 픽전문가 목록 화면

```
┌─────────────────────────────────────────────────────────────┐
│ 픽전문가 관리                                                │
├─────────────────────────────────────────────────────────────┤
│ [탭: 전체 | 신청대기 | 활동중 | 정지]                        │
├─────────────────────────────────────────────────────────────┤
│ □ │ ID │ 닉네임 │ 등급 │ 적중률 │ 총픽 │ 상태 │ 관리        │
├───┼────┼────────┼──────┼────────┼──────┼──────┼────────────┤
│ □ │ 1  │ pro1   │ S    │ 75.2%  │ 120  │ 활동 │ [상세]     │
│ □ │ 2  │ pro2   │ A    │ 68.0%  │ 85   │ 대기 │ [승인][거절]│
│ ...                                                         │
└─────────────────────────────────────────────────────────────┘
```

### 4.3 픽전문가 상세 화면

#### 기본 정보

회원 정보 + 추가 필드:

| 필드 | 설명 |
|------|------|
| 프로필 이미지 | 전문가 프로필 사진 |
| 전문가 등급 | S, A, B, C |
| 전문 종목 | 축구, 야구, 농구 등 |
| 총 픽 수 | 등록한 픽 개수 |
| 적중률 | 전체 적중률 |
| 수익률 | 배당 기준 수익률 |
| 팔로워 수 | 전문가 팔로워 |
| 누적 판매 | 유료 픽 판매 금액 |

#### 프로필 이미지 관리

> 참고: Admin_v0.2 ppt 49p

| 항목 | 규격 |
|------|------|
| 이미지 비율 | 1:1 (정사각형) |
| 권장 사이즈 | 200x200px 이상 |
| 최대 파일 크기 | 5MB |
| 지원 포맷 | JPG, PNG |

```
┌─────────────────────────────────────┐
│     전문가 프로필 이미지 관리        │
├─────────────────────────────────────┤
│  ┌─────────┐                        │
│  │         │  [이미지 업로드]       │
│  │  미리보기 │  [이미지 삭제]        │
│  │         │                        │
│  └─────────┘                        │
│                                     │
│  * 1:1 비율, 200x200px 이상 권장    │
│  * 최대 5MB, JPG/PNG 지원           │
└─────────────────────────────────────┘
```

#### 등급 기준

| 등급 | 적중률 | 추가 조건 |
|:----:|:------:|-----------|
| S | 80% 이상 | 100픽 이상, 3개월 이상 활동 |
| A | 70% 이상 | 80픽 이상 |
| B | 60% 이상 | 50픽 이상 |
| C | 60% 미만 | 조건 미충족 시 강등 |

### 4.4 픽전문가 승인/거절

#### 승인 프로세스

1. 유저가 픽전문가 신청
2. 관리자 심사 (조건 확인)
3. 승인 또는 거절 처리
4. 승인 시 전문가 권한 부여
5. 푸시/알림 발송

#### 거절 Modal

```
┌─────────────────────────────────────┐
│       픽전문가 신청 거절             │
├─────────────────────────────────────┤
│ 신청자: pro2 (d@e.f)                │
│                                     │
│ 거절 사유:                          │
│ ○ 적중률 미달                       │
│ ○ 픽 수 미달                        │
│ ○ 활동온도 미달                     │
│ ○ 기타                              │
│                                     │
│ 상세 사유:                          │
│ ┌─────────────────────────────────┐│
│ │                                 ││
│ └─────────────────────────────────┘│
│                                     │
│     [취소]          [거절 처리]     │
└─────────────────────────────────────┘
```

---

## 5. 데이터 요구사항

### 5.1 회원 데이터 구조

```typescript
interface User {
  id: number;
  email: string;
  nickname: string;
  profileImage?: string;
  status: 'active' | 'suspended' | 'withdrawn';
  socialProvider?: 'kakao' | 'naver' | 'apple';
  temperature: number;           // 활동온도
  createdAt: Date;
  lastLoginAt?: Date;

  // 통계
  postCount: number;
  commentCount: number;
  likeReceivedCount: number;
  followerCount: number;
  followingCount: number;
  pointBalance: number;
}

interface UserSuspension {
  id: number;
  userId: number;
  type: 'temporary' | 'permanent';
  duration?: number;             // 일 단위
  reason: string;
  createdAt: Date;
  expiredAt?: Date;
  createdBy: number;             // 관리자 ID
}
```

### 5.2 픽전문가 데이터 구조

```typescript
interface PickExpert {
  id: number;
  userId: number;
  profileImage?: string;         // 전문가 프로필 이미지 URL
  grade: 'S' | 'A' | 'B' | 'C';
  status: 'pending' | 'active' | 'suspended' | 'rejected';
  specialties: string[];         // 전문 종목
  totalPicks: number;
  hitRate: number;               // 적중률 (%)
  returnRate: number;            // 수익률 (%)
  totalSales: number;            // 누적 판매금액
  appliedAt: Date;
  approvedAt?: Date;
  approvedBy?: number;           // 승인 관리자 ID
}

interface ExpertApplication {
  id: number;
  userId: number;
  status: 'pending' | 'approved' | 'rejected';
  appliedAt: Date;
  processedAt?: Date;
  processedBy?: number;
  rejectionReason?: string;
}
```

---

## 6. API 요구사항

### 6.1 회원 관리 API

| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | /api/admin/users | 회원 목록 조회 |
| GET | /api/admin/users/{id} | 회원 상세 조회 |
| PUT | /api/admin/users/{id} | 회원 정보 수정 |
| POST | /api/admin/users/{id}/suspend | 회원 정지 |
| POST | /api/admin/users/{id}/unsuspend | 정지 해제 |
| DELETE | /api/admin/users/{id} | 회원 탈퇴 처리 |
| PUT | /api/admin/users/{id}/temperature | 활동온도 조정 |

### 6.2 픽전문가 관리 API

| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | /api/admin/experts | 픽전문가 목록 조회 |
| GET | /api/admin/experts/{id} | 픽전문가 상세 조회 |
| GET | /api/admin/experts/applications | 신청 목록 조회 |
| POST | /api/admin/experts/{id}/approve | 전문가 승인 |
| POST | /api/admin/experts/{id}/reject | 전문가 거절 |
| PUT | /api/admin/experts/{id}/grade | 등급 변경 |
| POST | /api/admin/experts/{id}/suspend | 전문가 정지 |
| POST | /api/admin/experts/{id}/profile-image | 프로필 이미지 업로드 |
| DELETE | /api/admin/experts/{id}/profile-image | 프로필 이미지 삭제 |

### 6.3 Request/Response 예시

#### 회원 목록 조회

```http
GET /api/admin/users?page=1&limit=20&status=active&search=user1
```

```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "email": "user1@example.com",
      "nickname": "user1",
      "status": "active",
      "temperature": 38.5,
      "createdAt": "2025-12-01T10:00:00Z"
    }
  ],
  "meta": {
    "page": 1,
    "limit": 20,
    "total": 150
  }
}
```

#### 회원 정지

```http
POST /api/admin/users/1/suspend
Content-Type: application/json

{
  "type": "temporary",
  "duration": 7,
  "reason": "커뮤니티 가이드라인 위반"
}
```

---

## 7. 관리자 기능 체크리스트

### 7.1 회원 관리

- [ ] 회원 목록 조회 (검색, 필터, 정렬)
- [ ] 회원 상세 조회
- [ ] 회원 정보 수정 (닉네임, 프로필)
- [ ] 회원 정지 처리 (기간/영구)
- [ ] 회원 정지 해제
- [ ] 회원 탈퇴 처리
- [ ] 활동온도 수동 조정
- [ ] 활동 내역 조회 (게시글, 댓글, 포인트)

### 7.2 픽전문가 관리

- [ ] 전문가 목록 조회
- [ ] 전문가 신청 목록 조회
- [ ] 신청 승인/거절 처리
- [ ] 전문가 등급 변경
- [ ] 전문가 정지 처리
- [ ] 전문가 조건 설정

---

## 8. 버전 관리

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| v0.1 | 2025-12-22 | 초기 작성 |
